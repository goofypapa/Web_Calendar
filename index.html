<!DOCTYPE html>
<html lang="en" class="no-js demo-2">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <meta name="description" content="Bookblock: A Content Flip Plugin - Demo 2" />
    <meta name="keywords" content="javascript, jquery, plugin, css3, flip, page, 3d, booklet, book, perspective" />
    <meta name="author" content="Codrops" />
    <link rel="stylesheet" type="text/css" href="css/default.css" />
    <link rel="stylesheet" type="text/css" href="css/bookblock.css" />
    <!-- custom demo style -->
    <link rel="stylesheet" type="text/css" href="css/css.css" />
    <link rel="stylesheet" type="text/css" href="css/calendar.css" />
    <script src="js/modernizr.custom.js"></script>
    <style>
        .fc-calendar-container img{
            width: 100%;
            margin-top: -35px;
        }
        #cat{
            width: 100px;
            position: fixed;
            left: 60px;
            bottom:20px;
            z-index: 1000;
        }
        #imgBj{
            width: 500px;
            position: absolute;
            top: 70px;
            left: 136px;
        }
        #hand{
            position: absolute;
            width: 50px;
            bottom: 60px;
            right: 120px;
            z-index: 10000;
        }
        #home{
            position: fixed;
            left: 10px;
            top: 5px;
            width: 40px;
            z-index: 1000;
        }
        #bj-shade{
            display: block;
            position: absolute;
            background:url("images/xq_bj.png");
            z-index: 1;
            background-size: cover;
        }
        #blackShade{
            width: 100%;
            height: 101%;
            display: block;
            position: absolute;
            background-color: #000;
            z-index: 100000;
            margin-top: 24%;
        }
    </style>
    <script>
        // 猫动画
        var arr=new Array()
        arr[0]="images/cat1.png";    //这里放图片路径
        arr[1]="images/cat2.png";
        var i=0;
        function image()
        {
            var ima=document.getElementById("cat");
            ima.src=arr[i]
            i++;
            if(i==2)
                i=0
            setTimeout("image()",400) //一秒钟调用一次
        }
    </script>
</head>
<body onLoad="image()">
<div id="blackShade"></div>
<div id="bj-shade"></div>
<img id="home" src="images/home.png" alt="" >
<img id="imgBj" src="images/home_pic_calendar.png" alt="">
<img src="images/cat1.png" id="cat" alt="">
<!--小手-->
<img id="hand" src="images/hand.gif" alt="">
<div class="container">
    <div class="main clearfix">
        <div class="bb-custom-wrapper">
            <div id="bb-bookblock" class="bb-bookblock">
                <div class="bb-item">
                    <div class="fc-calendar-wrap">
                        <div class="fc-calendar-container"><img src="http://www.dadpat.com/app/calendarImg/one.png" alt=""></div>
                    </div>
                </div>
                <div class="bb-item">
                    <div class="fc-calendar-wrap">
                        <div class="fc-calendar-container"><img src="http://www.dadpat.com/app/calendarImg/two.png" alt=""></div>
                    </div>
                </div>
                <div class="bb-item">
                    <div class="fc-calendar-wrap">
                        <div class="fc-calendar-container"><img src="http://www.dadpat.com/app/calendarImg/three.png" alt=""></div>
                    </div>
                </div>
                <div class="bb-item">
                    <div class="fc-calendar-wrap">
                        <div class="fc-calendar-container"><img src="http://www.dadpat.com/app/calendarImg/four.png" alt=""></div>
                    </div>
                </div>
                <div class="bb-item">
                    <div class="fc-calendar-wrap">
                        <div class="fc-calendar-container"><img src="http://www.dadpat.com/app/calendarImg/five.png" alt=""></div>
                    </div>
                </div>
                <div class="bb-item">
                    <div class="fc-calendar-wrap">
                        <div class="fc-calendar-container"><img src="http://www.dadpat.com/app/calendarImg/six.png" alt=""></div>
                    </div>
                </div>
                <div class="bb-item">
                    <div class="fc-calendar-wrap">
                        <div class="fc-calendar-container"><img src="http://www.dadpat.com/app/calendarImg/seven.png" alt=""></div>
                    </div>
                </div>
                <div class="bb-item">
                    <div class="fc-calendar-wrap">
                        <div class="fc-calendar-container"><img src="http://www.dadpat.com/app/calendarImg/august.png" alt=""></div>
                    </div>
                </div>
                <div class="bb-item">
                    <div class="fc-calendar-wrap">
                        <div class="fc-calendar-container"><img src="http://www.dadpat.com/app/calendarImg/sep.png" alt=""></div>
                    </div>
                </div>
                <div class="bb-item">
                    <div class="fc-calendar-wrap">
                        <div class="fc-calendar-container"><img src="http://www.dadpat.com/app/calendarImg/oct.png" alt=""></div>
                    </div>
                </div>
                <div class="bb-item">
                    <div class="fc-calendar-wrap">
                        <div class="fc-calendar-container"><img src="http://www.dadpat.com/app/calendarImg/nov.png" alt=""></div>
                    </div>
                </div>
                <div class="bb-item">
                    <div class="fc-calendar-wrap">
                        <div class="fc-calendar-container"><img src="http://www.dadpat.com/app/calendarImg/dec.png" alt=""></div>
                    </div>
                </div>
            </div>


        </div>
    </div>
</div><!-- /container -->
<!--<script src="http://www.jq22.com/jquery/1.9.1/jquery.min.js"></script>-->
<script src="js/jquery-3.3.1.min.js"></script>
<script src="js/jquery.bookblock.js"></script>
<script>
    // var bili=(window.screen.width/500);
    var pmWidth=window.screen.availWidth;
    var bjLeft=pmWidth/2-270;
    console.log(bjLeft);
    var bjSize=document.getElementById("imgBj");
    bjSize.style.left=bjLeft+"px";
    var catSize=document.getElementById("cat");
    catSize.style.left=bjLeft/3*2+"px";
    catSize.style.bottom=pmWidth/20+"px";
    var handSize=document.getElementById("hand");
    handSize.style.right=pmWidth/4+"px";
    handSize.style.bottom=pmWidth/8+"px";
    // var locationSize=document.getElementById("location");
    // locationSize.style.width = bjWidth+'px';
    // locationSize.style.height = window.screen.width+'px';

    $(".fc-calendar-container img").click(function () {
        var myNum=$(this).attr("src");
        // 截取数字js
        // myNum=myNum.replace(/[^0-9]/ig,"");
        // 截取图片名字
        var index = myNum .lastIndexOf("\/");
        myNum  = myNum .substring(index + 1, myNum .length);
        var ipos =  myNum.indexOf(".");
        myNum=myNum.substring(0,ipos); //取前部分
        console.log(myNum);
        window.location.href="lunbo.html?num="+myNum;
    })
    var Page = (function() {
        var startx, starty;
        //获得角度
        function getAngle(angx, angy) {
            return Math.atan2(angy, angx) * 180 / Math.PI;
        };

        //根据起点终点返回方向 1向上 2向下 3向左 4向右 0未滑动
        function getDirection(startx, starty, endx, endy) {
            var angx = endx - startx;
            var angy = endy - starty;
            var result = 0;

            //如果滑动距离太短
            if (Math.abs(angx) < 2 && Math.abs(angy) < 2) {
                return result;
            }

            var angle = getAngle(angx, angy);
            if (angle >= -135 && angle <= -45) {
                result = 1;
            } else if (angle > 45 && angle < 135) {
                result = 2;
            } else if ((angle >= 135 && angle <= 180) || (angle >= -180 && angle < -135)) {
                result = 3;
            } else if (angle >= -45 && angle <= 45) {
                result = 4;
            }

            return result;
        }
        //手指接触屏幕
        document.addEventListener("touchstart", function(e){
            startx = e.touches[0].pageX;
            starty = e.touches[0].pageY;
        }, false);
        //手指离开屏幕
        document.addEventListener("touchend", function(e) {
            var endx, endy;
            endx = e.changedTouches[0].pageX;
            endy = e.changedTouches[0].pageY;
            var direction = getDirection(startx, starty, endx, endy);
            switch (direction) {

                case 1:
                    // alert("向上！");
                    config.$bookBlock.bookblock( 'next' );
                    $("#hand").css("display","none");
                    return false;
                    break;
                case 2:
                    // alert("向下！");
                    config.$bookBlock.bookblock( 'prev' );
                    return false;
                    break;
                default:
            }
        }, false);



        var config = {
                $bookBlock : $( '#bb-bookblock' ),
                $navNext : $( '#bb-nav-next' ),
                $navPrev : $( '#bb-nav-prev' )
            },
            init = function() {

                config.$bookBlock.bookblock( {
                    orientation : 'horizontal',
                    speed : 700
                } );

            }

        return { init : init };

    })();

    $("#home").click(function(){
        if( typeof( goofypapaGame ) != "undefined" && goofypapaGame ){
            window.location.href='goofypapa://back';
        }else{
            window.android.exitApp()
        }
    })
    window.onload=function () {
        $("#blackShade").fadeOut();
    }
</script>
<script>
    Page.init();

</script>

</body>
</html>